<!--
* Copyright 2018-2019 Tampere University
* 
* Main authors: Anna-Liisa Mattila, Henri Terho, Antti Luoto, Hugo Fooy
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy of
* this software and associated documentation files (the "Software"), to deal in 
* the Software without restriction, including without limitation the rights to 
* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
* the Software, and to permit persons to whom the Software is furnished to do so, 
* subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS 
* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR 
* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN 
* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
<script type="text/javascript">
  //Script that handles authentication method change
  function authentication(obj) {
    $('#authMethod').value = obj.value; //Not working!
    switch (obj.value) {
      case 'noauth':
        $('#authParams').hide();
        $('#userName').prop('required', false);
        $('#pwd').prop('required', false);
        break;
      case 'basic':
        $('#authParams').show();
        $('#userName').prop('required', true);
        $('#pwd').prop('required', true);
        break;
      default:
    }
  }
</script>

<div class="col-sm-12">

  <form id="queryform" class="form-horizontal" action="/apps" method="post">

    <h3>Authentication</h3>
    <div class="form-group">
      <label for="method" class="col-sm-3 control-label">Method</label>
      <div class="col-sm-9">
        <select class="form-control" id="method" onchange="authentication(this);">
          <option value="noauth" selected>No authentication</option>
          <option value="basic">Basic</option>
          <option value="oauth2" disabled>OAuth2</option>
        </select>
      </div>
    </div>

    <div class="form-group" id="authParams" hidden>
      <label for="userName" class="col-sm-3 control-label">User name</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" name="userName" id="userName" value="">
      </div>

      <label for="pwd" class="col-sm-3 control-label">Password</label>
      <div class="col-sm-9">
        <input class="form-control" type="password" name="pwd" id="pwd" value="" />
      </div>
    </div>

    <h3>API Settings</h3>
    <div class="form-group">
      <label for="url" class="col-sm-3 control-label">Base URL</label>
      <div class="col-sm-9">
        <input class="form-control" type="url" name="url" id="url" value="http://localhost:8080/job" />
      </div>
      <label for="projectName" class="col-sm-3 control-label">Project name</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" name="projectName" id="projectName" value="visu-dev" />
      </div>
    </div>

    <h3>Database Settings</h3>
    <div class="form-group">
      <label for="context" class="col-sm-3 control-label">Context</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" name="context" id="context" value="visu" />
      </div>
      <label for="source" class="col-sm-3 control-label">Source</label>
      <div class="col-sm-9">
        <input class="form-control" type="text" name="source" id="source" value="jenkins" />
      </div>
    </div>

    <!-- Hidden parameters (from selection) -->
    <div hidden>
      <input class="form-control" type="text" name="api" id="api" value="gitlab" />
      <input class="form-control" type="text" name="authMethod" id="authMethod" value="noauth">
    </div>

    <input type="submit" class="btn btn-primary btn-block" value="Submit">
  </form>
</div>